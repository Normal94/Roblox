-- ==========================================
-- SCRIPT EN GITHUB: LIBRER√çA DE UI MEN√ö GATO (V8.2 - Submen√∫ Emotes)
-- ==========================================
local CoreGui = (gethui and gethui()) or game:GetService("CoreGui")
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")

local Library = {}

function Library:Init(titleText)
    local urlLogo = "https://raw.githubusercontent.com/Normal94/Roblox/refs/heads/main/GATO%20MENU"
    local nombreLogo = "LogoGatoV8.png"

    if CoreGui:FindFirstChild("MenuGatoUI") then CoreGui.MenuGatoUI:Destroy() end

    local ScreenGui = Instance.new("ScreenGui")
    ScreenGui.Name = "MenuGatoUI"
    ScreenGui.ResetOnSpawn = false
    ScreenGui.IgnoreGuiInset = true
    ScreenGui.Parent = CoreGui

    local fadeInfo = TweenInfo.new(0.6, Enum.EasingStyle.Quint, Enum.EasingDirection.Out)
    local tweenInfo = TweenInfo.new(0.4, Enum.EasingStyle.Quint, Enum.EasingDirection.Out)

    -- Bot√≥n Abrir (Minimizado)
    local OpenButton = Instance.new("TextButton", ScreenGui)
    OpenButton.Size = UDim2.new(0, 100, 0, 26)
    OpenButton.Position = UDim2.new(0.5, -50, 0, 5)
    OpenButton.BackgroundColor3 = Color3.fromRGB(20, 25, 30)
    OpenButton.BackgroundTransparency = 1
    OpenButton.Text = "MEN√ö GATO"
    OpenButton.TextColor3 = Color3.fromHex("#f9bb35")
    OpenButton.Font = Enum.Font.Gotham; OpenButton.TextSize = 12
    OpenButton.Visible = true
    Instance.new("UICorner", OpenButton).CornerRadius = UDim.new(0, 8)
    local OpenStroke = Instance.new("UIStroke", OpenButton)
    OpenStroke.Color = Color3.fromHex("#f9bb35"); OpenStroke.Transparency = 1

    -- Ventana Principal
    local MainFrame = Instance.new("CanvasGroup", ScreenGui)
    MainFrame.Size = UDim2.new(0, 450, 0, 380)
    MainFrame.Position = UDim2.new(0.5, -225, 0.5, -190)
    MainFrame.BackgroundColor3 = Color3.fromRGB(15, 20, 25)
    MainFrame.BackgroundTransparency = 0.3
    MainFrame.GroupTransparency = 1; MainFrame.Visible = false
    Instance.new("UICorner", MainFrame).CornerRadius = UDim.new(0, 12)
    local MainScale = Instance.new("UIScale", MainFrame)
    MainScale.Scale = 0.8

    local TopBar = Instance.new("Frame", MainFrame)
    TopBar.Size = UDim2.new(1, 0, 0, 40)
    TopBar.BackgroundTransparency = 1

    local Title = Instance.new("TextLabel", TopBar)
    Title.Size = UDim2.new(1, -50, 1, 0)
    Title.Position = UDim2.new(0, 15, 0, 0)
    Title.BackgroundTransparency = 1
    Title.Text = titleText or "MEN√ö GATO"
    Title.TextColor3 = Color3.fromRGB(255, 255, 255)
    Title.Font = Enum.Font.GothamBold; Title.TextSize = 16
    Title.TextXAlignment = Enum.TextXAlignment.Left

    local CloseBtn = Instance.new("TextButton", TopBar)
    CloseBtn.Size = UDim2.new(0, 30, 0, 30)
    CloseBtn.Position = UDim2.new(1, -40, 0, 5)
    CloseBtn.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
    CloseBtn.BackgroundTransparency = 0.6
    CloseBtn.Text = "X"; CloseBtn.TextColor3 = Color3.fromRGB(200, 200, 200)
    CloseBtn.Font = Enum.Font.GothamBold; CloseBtn.TextSize = 16
    Instance.new("UICorner", CloseBtn).CornerRadius = UDim.new(0, 8)

    local TabBar = Instance.new("ScrollingFrame", MainFrame)
    TabBar.Size = UDim2.new(1, -20, 0, 35)
    TabBar.Position = UDim2.new(0, 10, 0, 45)
    TabBar.BackgroundTransparency = 1
    TabBar.ScrollBarThickness = 0
    local TabBarLayout = Instance.new("UIListLayout", TabBar)
    TabBarLayout.FillDirection = Enum.FillDirection.Horizontal
    TabBarLayout.Padding = UDim.new(0, 8); TabBarLayout.SortOrder = Enum.SortOrder.LayoutOrder
    TabBarLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function() TabBar.CanvasSize = UDim2.new(0, TabBarLayout.AbsoluteContentSize.X, 0, 0) end)

    local PageContainer = Instance.new("Frame", MainFrame)
    PageContainer.Size = UDim2.new(1, -20, 1, -95)
    PageContainer.Position = UDim2.new(0, 10, 0, 85)
    PageContainer.BackgroundTransparency = 1

    -- Animaciones y Drag
    local dragging, dragStart, startPos
    TopBar.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            dragging, dragStart, startPos = true, input.Position, MainFrame.Position
            input.Changed:Connect(function() if input.UserInputState == Enum.UserInputState.End then dragging = false end end)
        end
    end)
    UserInputService.InputChanged:Connect(function(input)
        if dragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
            local delta = input.Position - dragStart
            MainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
        end
    end)

    CloseBtn.MouseButton1Click:Connect(function()
        TweenService:Create(MainScale, tweenInfo, {Scale = 0.8}):Play()
        local t = TweenService:Create(MainFrame, tweenInfo, {GroupTransparency = 1}); t:Play(); t.Completed:Wait()
        MainFrame.Visible = false; OpenButton.Visible = true
        TweenService:Create(OpenButton, tweenInfo, {BackgroundTransparency = 0.5, TextTransparency = 0}):Play()
        TweenService:Create(OpenStroke, tweenInfo, {Transparency = 0.3}):Play()
    end)

    OpenButton.MouseButton1Click:Connect(function()
        TweenService:Create(OpenButton, tweenInfo, {BackgroundTransparency = 1, TextTransparency = 1}):Play()
        TweenService:Create(OpenStroke, tweenInfo, {Transparency = 1}):Play()
        task.wait(0.2); OpenButton.Visible = false; MainFrame.Visible = true
        TweenService:Create(MainScale, tweenInfo, {Scale = 1}):Play()
        TweenService:Create(MainFrame, tweenInfo, {GroupTransparency = 0}):Play()
    end)

    local activeTabBtn, activePage = nil, nil
    local WindowAPI = {}

    -- PESTA√ëAS NORMALES
    function WindowAPI:CreateTab(name)
        local btn = Instance.new("TextButton", TabBar)
        btn.Size = UDim2.new(0, 100, 1, -5)
        btn.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
        btn.BackgroundTransparency = 0.9
        btn.TextColor3 = Color3.fromRGB(200, 200, 200)
        btn.Font = Enum.Font.GothamMedium; btn.TextSize = 12; btn.Text = name; btn.AutoButtonColor = false
        Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 8)
        
        local page = Instance.new("ScrollingFrame", PageContainer)
        page.Size = UDim2.new(1, 0, 1, 0)
        page.BackgroundTransparency = 1; page.ScrollBarThickness = 2; page.Visible = false
        page.AutomaticCanvasSize = Enum.AutomaticSize.Y
        local layout = Instance.new("UIListLayout", page)
        layout.Padding = UDim.new(0, 8); layout.SortOrder = Enum.SortOrder.LayoutOrder

        btn.MouseButton1Click:Connect(function()
            if activeTabBtn then activeTabBtn.BackgroundTransparency = 0.9; activeTabBtn.TextColor3 = Color3.fromRGB(200, 200, 200); activePage.Visible = false end
            activeTabBtn = btn; activePage = page
            btn.BackgroundTransparency = 0.2; btn.TextColor3 = Color3.fromRGB(20, 20, 20); page.Visible = true
        end)
        if not activeTabBtn then btn.BackgroundTransparency = 0.2; btn.TextColor3 = Color3.fromRGB(20, 20, 20); page.Visible = true; activeTabBtn = btn; activePage = page end

        local TabAPI = {}
        function TabAPI:AddLabel(text)
            local lbl = Instance.new("TextLabel", page)
            lbl.Size = UDim2.new(1, 0, 0, 20); lbl.BackgroundTransparency = 1; lbl.Text = text
            lbl.TextColor3 = Color3.fromHex("#f9bb35"); lbl.Font = Enum.Font.GothamBold; lbl.TextSize = 13; lbl.TextXAlignment = Enum.TextXAlignment.Left
        end
        function TabAPI:AddButton(text, callback)
            local b = Instance.new("TextButton", page)
            b.Size = UDim2.new(1, -5, 0, 32); b.BackgroundColor3 = Color3.fromRGB(255, 255, 255); b.BackgroundTransparency = 0.9
            b.TextColor3 = Color3.fromRGB(255, 255, 255); b.Font = Enum.Font.GothamMedium; b.TextSize = 12; b.Text = text
            Instance.new("UICorner", b).CornerRadius = UDim.new(0, 8)
            local s = Instance.new("UIStroke", b); s.Color = Color3.fromRGB(255,255,255); s.Transparency = 0.85
            b.MouseButton1Click:Connect(callback)
            return b
        end
        function TabAPI:AddToggle(text, callback)
            local state = false
            local b = Instance.new("TextButton", page)
            b.Size = UDim2.new(1, -5, 0, 32); b.BackgroundColor3 = Color3.fromRGB(255, 255, 255); b.BackgroundTransparency = 0.9
            b.TextColor3 = Color3.fromRGB(255, 255, 255); b.Font = Enum.Font.GothamMedium; b.TextSize = 12; b.Text = text
            Instance.new("UICorner", b).CornerRadius = UDim.new(0, 8)
            local s = Instance.new("UIStroke", b); s.Color = Color3.fromRGB(255,255,255); s.Transparency = 0.85
            b.MouseButton1Click:Connect(function()
                state = not state; b.Text = state and ("‚úì " .. text) or text
                b.TextColor3 = state and Color3.fromHex("#D4E9D8") or Color3.fromRGB(255, 255, 255)
                s.Color = state and Color3.fromHex("#D4E9D8") or Color3.fromRGB(255, 255, 255)
                callback(state)
            end)
        end
        function TabAPI:AddSlider(text, min, max, default, callback)
            local frame = Instance.new("Frame", page)
            frame.Size = UDim2.new(1, -5, 0, 45); frame.BackgroundTransparency = 1
            local lbl = Instance.new("TextLabel", frame)
            lbl.Size = UDim2.new(1, 0, 0, 15); lbl.BackgroundTransparency = 1; lbl.Text = text .. ": " .. default
            lbl.TextColor3 = Color3.fromRGB(255, 255, 255); lbl.Font = Enum.Font.GothamMedium; lbl.TextSize = 12; lbl.TextXAlignment = Enum.TextXAlignment.Left
            local bar = Instance.new("TextButton", frame)
            bar.Size = UDim2.new(1, 0, 0, 8); bar.Position = UDim2.new(0, 0, 0, 25); bar.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
            bar.BackgroundTransparency = 0.8; bar.Text = ""
            Instance.new("UICorner", bar).CornerRadius = UDim.new(1, 0)
            local fill = Instance.new("Frame", bar)
            fill.Size = UDim2.new((default - min) / (max - min), 1, 0); fill.BackgroundColor3 = Color3.fromHex("#D4E9D8")
            Instance.new("UICorner", fill).CornerRadius = UDim.new(1, 0)
            local dragging = false
            local function updateSlider(input)
                local pos = math.clamp((input.Position.X - bar.AbsolutePosition.X) / bar.AbsoluteSize.X, 0, 1)
                fill.Size = UDim2.new(pos, 0, 1, 0); local val = math.floor(min + (max - min) * pos)
                lbl.Text = text .. ": " .. val; callback(val)
            end
            bar.InputBegan:Connect(function(input) if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then dragging = true updateSlider(input) end end)
            UserInputService.InputEnded:Connect(function(input) if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then dragging = false end end)
            UserInputService.InputChanged:Connect(function(input) if dragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then updateSlider(input) end end)
        end
        function TabAPI:AddInput(placeholder, callback)
            local box = Instance.new("TextBox", page)
            box.Size = UDim2.new(1, -5, 0, 32); box.BackgroundColor3 = Color3.fromRGB(255, 255, 255); box.BackgroundTransparency = 0.9
            box.TextColor3 = Color3.fromRGB(255, 255, 255); box.Font = Enum.Font.GothamMedium; box.TextSize = 12
            box.PlaceholderText = placeholder; box.Text = ""; box.ClearTextOnFocus = false
            Instance.new("UICorner", box).CornerRadius = UDim.new(0, 8)
            local s = Instance.new("UIStroke", box); s.Color = Color3.fromRGB(255,255,255); s.Transparency = 0.85
            box.FocusLost:Connect(function(enter) if enter then callback(box.Text) end end)
            return box
        end
        return TabAPI
    end

    -- ==========================================
    -- PESTA√ëA ESPECIAL DE EMOTES (TU DISE√ëO EXACTO)
    -- ==========================================
    function WindowAPI:CreateEmotesTab(name)
        local btn = Instance.new("TextButton", TabBar)
        btn.Size = UDim2.new(0, 100, 1, -5); btn.BackgroundColor3 = Color3.fromRGB(255, 255, 255); btn.BackgroundTransparency = 0.9
        btn.TextColor3 = Color3.fromRGB(200, 200, 200); btn.Font = Enum.Font.GothamMedium; btn.TextSize = 12; btn.Text = name; btn.AutoButtonColor = false
        Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 8)

        local page = Instance.new("Frame", PageContainer)
        page.Size = UDim2.new(1, 0, 1, 0); page.BackgroundTransparency = 1; page.Visible = false

        btn.MouseButton1Click:Connect(function()
            if activeTabBtn then activeTabBtn.BackgroundTransparency = 0.9; activeTabBtn.TextColor3 = Color3.fromRGB(200, 200, 200); activePage.Visible = false end
            activeTabBtn = btn; activePage = page
            btn.BackgroundTransparency = 0.2; btn.TextColor3 = Color3.fromRGB(20, 20, 20); page.Visible = true
        end)

        -- VISTA MAIN
        local ViewMain = Instance.new("Frame", page)
        ViewMain.Size = UDim2.new(1, 0, 1, 0); ViewMain.BackgroundTransparency = 1

        local BtnBuscarMenu = Instance.new("TextButton", ViewMain)
        BtnBuscarMenu.Size = UDim2.new(0.48, 0, 0, 32); BtnBuscarMenu.BackgroundColor3 = Color3.fromRGB(255, 255, 255); BtnBuscarMenu.BackgroundTransparency = 0.85
        BtnBuscarMenu.Text = "Buscar üîé"; BtnBuscarMenu.TextColor3 = Color3.fromRGB(255, 255, 255); BtnBuscarMenu.Font = Enum.Font.GothamSemibold; BtnBuscarMenu.TextSize = 13
        Instance.new("UICorner", BtnBuscarMenu).CornerRadius = UDim.new(0, 8)

        local BtnDetener = Instance.new("TextButton", ViewMain)
        BtnDetener.Size = UDim2.new(0.48, 0, 0, 32); BtnDetener.Position = UDim2.new(0.52, 0, 0, 0); BtnDetener.BackgroundColor3 = Color3.fromRGB(255, 60, 60)
        BtnDetener.BackgroundTransparency = 0.5; BtnDetener.Text = "Detener üõë"; BtnDetener.TextColor3 = Color3.fromRGB(255, 255, 255); BtnDetener.Font = Enum.Font.GothamSemibold; BtnDetener.TextSize = 13
        Instance.new("UICorner", BtnDetener).CornerRadius = UDim.new(0, 8)

        local TitleFavs = Instance.new("TextLabel", ViewMain)
        TitleFavs.Size = UDim2.new(1, 0, 0, 20); TitleFavs.Position = UDim2.new(0, 0, 0, 42); TitleFavs.BackgroundTransparency = 1
        TitleFavs.Text = "Favoritos ‚≠ê"; TitleFavs.TextColor3 = Color3.fromRGB(200, 200, 200); TitleFavs.Font = Enum.Font.GothamBold; TitleFavs.TextSize = 14; TitleFavs.TextXAlignment = Enum.TextXAlignment.Left

        local ScrollFavs = Instance.new("ScrollingFrame", ViewMain)
        ScrollFavs.Size = UDim2.new(1, 0, 1, -65); ScrollFavs.Position = UDim2.new(0, 0, 0, 65); ScrollFavs.BackgroundTransparency = 1; ScrollFavs.ScrollBarThickness = 2
        local LayoutFavs = Instance.new("UIListLayout", ScrollFavs); LayoutFavs.Padding = UDim.new(0, 5)

        -- VISTA BUSCADOR (Sub-men√∫)
        local ViewSearch = Instance.new("Frame", page)
        ViewSearch.Size = UDim2.new(1, 0, 1, 0); ViewSearch.BackgroundTransparency = 1; ViewSearch.Visible = false

        local BtnVolver = Instance.new("TextButton", ViewSearch)
        BtnVolver.Size = UDim2.new(0, 32, 0, 32); BtnVolver.BackgroundColor3 = Color3.fromRGB(255, 255, 255); BtnVolver.BackgroundTransparency = 0.85
        BtnVolver.Text = "<"; BtnVolver.TextColor3 = Color3.fromRGB(255, 255, 255); BtnVolver.Font = Enum.Font.GothamBold; BtnVolver.TextSize = 14
        Instance.new("UICorner", BtnVolver).CornerRadius = UDim.new(0, 8)

        local InputBuscador = Instance.new("TextBox", ViewSearch)
        InputBuscador.Size = UDim2.new(1, -75, 0, 32); InputBuscador.Position = UDim2.new(0, 38, 0, 0); InputBuscador.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
        InputBuscador.BackgroundTransparency = 0.5; InputBuscador.Text = ""; InputBuscador.PlaceholderText = "Buscar en tienda Roblox..."
        InputBuscador.TextColor3 = Color3.fromRGB(255, 255, 255); InputBuscador.Font = Enum.Font.Gotham; InputBuscador.TextSize = 12
        Instance.new("UICorner", InputBuscador).CornerRadius = UDim.new(0, 8)

        local BtnEjecutarBusqueda = Instance.new("TextButton", ViewSearch)
        BtnEjecutarBusqueda.Size = UDim2.new(0, 32, 0, 32); BtnEjecutarBusqueda.Position = UDim2.new(1, -32, 0, 0); BtnEjecutarBusqueda.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
        BtnEjecutarBusqueda.BackgroundTransparency = 0.85; BtnEjecutarBusqueda.Text = "üîé"; BtnEjecutarBusqueda.TextColor3 = Color3.fromRGB(255, 255, 255)
        BtnEjecutarBusqueda.Font = Enum.Font.GothamBold; BtnEjecutarBusqueda.TextSize = 14
        Instance.new("UICorner", BtnEjecutarBusqueda).CornerRadius = UDim.new(0, 8)

        local InputManual = Instance.new("TextBox", ViewSearch)
        InputManual.Size = UDim2.new(1, -40, 0, 30); InputManual.Position = UDim2.new(0, 0, 0, 42); InputManual.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
        InputManual.BackgroundTransparency = 0.5; InputManual.Text = ""; InputManual.PlaceholderText = "Agregar ID Manual (Ej: 5230661597)"
        InputManual.TextColor3 = Color3.fromRGB(255, 255, 255); InputManual.Font = Enum.Font.Gotham; InputManual.TextSize = 11
        Instance.new("UICorner", InputManual).CornerRadius = UDim.new(0, 6)

        local BtnAddManual = Instance.new("TextButton", ViewSearch)
        BtnAddManual.Size = UDim2.new(0, 35, 0, 30); BtnAddManual.Position = UDim2.new(1, -35, 0, 42); BtnAddManual.BackgroundColor3 = Color3.fromRGB(50, 200, 50)
        BtnAddManual.BackgroundTransparency = 0.5; BtnAddManual.Text = "+"; BtnAddManual.TextColor3 = Color3.fromRGB(255, 255, 255)
        BtnAddManual.Font = Enum.Font.GothamBold; BtnAddManual.TextSize = 16
        Instance.new("UICorner", BtnAddManual).CornerRadius = UDim.new(0, 6)

        local ScrollRec = Instance.new("ScrollingFrame", ViewSearch)
        ScrollRec.Size = UDim2.new(1, 0, 1, -85); ScrollRec.Position = UDim2.new(0, 0, 0, 85); ScrollRec.BackgroundTransparency = 1; ScrollRec.ScrollBarThickness = 2
        local LayoutRec = Instance.new("UIListLayout", ScrollRec); LayoutRec.Padding = UDim.new(0, 5)

        -- L√≥gica de navegaci√≥n del submen√∫
        BtnBuscarMenu.MouseButton1Click:Connect(function() ViewMain.Visible = false; ViewSearch.Visible = true end)
        BtnVolver.MouseButton1Click:Connect(function() ViewSearch.Visible = false; ViewMain.Visible = true end)

        LayoutRec:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function() ScrollRec.CanvasSize = UDim2.new(0, 0, 0, LayoutRec.AbsoluteContentSize.Y + 10) end)
        LayoutFavs:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function() ScrollFavs.CanvasSize = UDim2.new(0, 0, 0, LayoutFavs.AbsoluteContentSize.Y + 10) end)

        -- Devolvemos la estructura para que el Loader le inyecte las funciones
        local EmoteAPI = {
            BtnDetener = BtnDetener,
            BtnEjecutarBusqueda = BtnEjecutarBusqueda,
            InputBuscador = InputBuscador,
            BtnAddManual = BtnAddManual,
            InputManual = InputManual,
            ScrollRec = ScrollRec
        }

        local function crearItem(nombre, isFav, padre, playCallback, favCallback)
            local Item = Instance.new("Frame", padre)
            Item.Size = UDim2.new(1, -10, 0, 35); Item.BackgroundColor3 = Color3.fromRGB(255, 255, 255); Item.BackgroundTransparency = 0.95
            Instance.new("UICorner", Item).CornerRadius = UDim.new(0, 6)
            
            local PlayBtn = Instance.new("TextButton", Item)
            PlayBtn.Size = UDim2.new(1, -40, 1, 0); PlayBtn.BackgroundTransparency = 1; PlayBtn.Text = "  ‚ñ∂ " .. nombre
            PlayBtn.TextColor3 = Color3.fromRGB(255, 255, 255); PlayBtn.Font = Enum.Font.Gotham; PlayBtn.TextSize = 12; PlayBtn.TextXAlignment = Enum.TextXAlignment.Left
            PlayBtn.MouseButton1Click:Connect(playCallback)
            
            local FavBtn = Instance.new("TextButton", Item)
            FavBtn.Size = UDim2.new(0, 30, 0, 30); FavBtn.Position = UDim2.new(1, -35, 0, 2); FavBtn.BackgroundTransparency = 1
            FavBtn.Text = isFav and "‚≠ê" or "‚òÜ"; FavBtn.TextColor3 = isFav and Color3.fromRGB(255, 215, 0) or Color3.fromRGB(180, 180, 180); FavBtn.TextSize = 16
            
            local currentState = isFav
            FavBtn.MouseButton1Click:Connect(function()
                currentState = not currentState
                FavBtn.Text = currentState and "‚≠ê" or "‚òÜ"
                FavBtn.TextColor3 = currentState and Color3.fromRGB(255, 215, 0) or Color3.fromRGB(180, 180, 180)
                favCallback(currentState, Item)
            end)
            return Item
        end

        function EmoteAPI:AddFav(nombre, playCb, favCb) return crearItem(nombre, true, ScrollFavs, playCb, favCb) end
        function EmoteAPI:AddRec(nombre, isFav, playCb, favCb) return crearItem(nombre, isFav, ScrollRec, playCb, favCb) end
        function EmoteAPI:ClearFavs() for _, v in pairs(ScrollFavs:GetChildren()) do if v:IsA("Frame") then v:Destroy() end end end
        function EmoteAPI:ClearRecs() for _, v in pairs(ScrollRec:GetChildren()) do if v:IsA("Frame") or v:IsA("TextButton") then v:Destroy() end end end
        function EmoteAPI:AddLoadMore(callback)
            local btn = Instance.new("TextButton", ScrollRec)
            btn.Size = UDim2.new(1, -10, 0, 30); btn.BackgroundColor3 = Color3.fromRGB(40, 100, 200); btn.BackgroundTransparency = 0.5
            btn.Text = "Cargar m√°s..."; btn.TextColor3 = Color3.fromRGB(255, 255, 255); Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 6)
            btn.MouseButton1Click:Connect(function() btn:Destroy(); callback() end)
        end

        return EmoteAPI
    end

    return WindowAPI
end

return Library
